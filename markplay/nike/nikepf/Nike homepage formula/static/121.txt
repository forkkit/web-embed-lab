(function() { function bxBootstrap() {
	if (!(window.bouncex&&bouncex.website)) {
		var pushedData = [];
		if(window.bouncex && bouncex.push && bouncex.length){
			pushedData = bouncex;
		}
		window.bouncex = {};
		bouncex.pushedData = pushedData;
		bouncex.website = {"id":2163,"cookie_name":"bounceClientVisit2163","domain":"nike.com","ct":"bind_to_domain","ally":0,"ei":0,"tcjs":"","cjs":"/* store hashed data*/\nbouncex.infoStore = {\n    sessionStorageIdentifier: 'bxInfoStore',\n    set: function(data) {\n        var hashedData = bouncex.lz.compressToURI(JSON.stringify(data));\n        try {\n            sessionStorage.setItem(this.sessionStorageIdentifier, hashedData);\n        } catch(e) {\n            bouncex.err('session storage failure');\n        }\n    },\n\n    get: function() {\n        var info = sessionStorage.getItem(this.sessionStorageIdentifier);\n        return info ? JSON.parse(bouncex.lz.decompressFromURI(info)) : '';\n    },\n\n    infoIsStored: function() {\n        return !!sessionStorage.getItem(this.sessionStorageIdentifier);\n    },\n\n    populateFields: function(fields) {\n        if (!this.infoIsStored()) return;\n\n        var data = this.get();\n        for (var field in fields) {\n            if (fields.hasOwnProperty(field)) {\n                fields[field].val(data[field]);\n            }\n        }\n    }\n};\n\n/*wrike: https://www.wrike.com/open.htm?id=152466137*/\nwindow.bouncex.omnitureLinkTrack = function(action, label) {\n    var events = {\n        impression: 'eVar39',\n        click: 'eVar92',\n        submission: 'eVar93'\n    };\n    var evar = events[action]? events[action] : false;\n    if (typeof window.s === 'object' && typeof window.s.tl === 'function' && evar) {\n        window.s[evar] = action + ': ' + label;\n        window.s.tl();\n    }\n};\n\nwindow.bouncex.report_ga = function(action, label, bypass) {\n    window.bouncex.omnitureLinkTrack(action, label);\n};\n\n/*cookie management: https://www.wrike.com/open.htm?id=173181970*/\nfunction cleanBxCookies() {\n    var cookies = document.cookie.split(';');\n    var numCookies = cookies.length;\n    for (var r = 0; r < numCookies; r++) {\n        var i = cookies[r];\n        while (i.charAt(0) == ' ') {\n            i = i.substring(1, i.length);\n        }\n        if (i.indexOf('bounceClientVisit') === 0) {\n            var name = i.split('=')[0];\n            if (name.indexOf(bouncex.website.id) === -1) {\n                deleteCookie(name);\n            }\n        }\n    }\n}\nfunction deleteCookie(name) {\n    var expiration = '; expires=Thu, 01 Jan 1970 00:00:01 GMT';\n    document.cookie = (name + '=' + expiration + ';path=/;');\n    document.cookie = (name + '=' + expiration + ';path=/;domain=.'+bouncex.cookie_domain+';');\n}\n\ncleanBxCookies();\n/*end cookie management*/\n\nbouncex.on(bouncex.window, 'bxVarsChange', function(e, r) {\n    var atcModalChanged = r.filter(function(cv) { return cv.name === 'atc_modal_open'; }).length;\n    var subtotalAbsent = jQuery('.cart-item-data.subtotal-row .subtotal-value').length === 0;\n    \n    if (atcModalChanged && bouncex.vars.atc_modal_open && subtotalAbsent) {\n        // only add if subtotal is absent and add to cart modal is present (flashes after successful atc)\n        var newTotal = bouncex.vars.cart_total + bouncex.vars.prod_price;\n        bouncex.setVar('cart_total', newTotal);\n        bouncex.setBounceCookie();\n        bouncex.reload_campaigns();\n    }\n});","force_https":false,"waypoints":false,"content_width":0,"gai":"","swids":"","sd":0,"ljq":"auto","campaign_id":0,"is_preview":false,"aco":{"first_party_limit":"3500","local_storage":"1"},"cmp":{"gdpr":1,"gmp":0,"whitelist_check":0},"burls":[],"ple":false,"fbe":true,"mas":2,"map":1,"gar":true,"ete":0,"ettm":true,"etjs":"","dge":false,"bxidLoadFirst":false,"gbi_enabled":0,"gbi":{"rblocks":null},"bpush":false,"pt":{"cart":{"testmode":true,"val":[[{"activation":"current_page_url","prop":"contains"}]]},"category":{"testmode":true,"val":[[{"activation":"current_page_url","prop":"contains"}]]},"checkout":{"testmode":true,"val":[[{"activation":"current_page_url","prop":"contains"}]]},"home":{"testmode":true,"val":[[{"activation":"current_page_url","prop":"exactly","prop2":"","prop3":"","val":"/"}]]},"product":{"testmode":false,"val":[[{"activation":"js","prop":"","prop2":"","prop3":"","val":"window.INITIAL_REDUX_STATE.Common.pageType === 'pdp' ? true : false;"},{"activation":"current_page_url","prop":"contains","prop2":"","prop3":"","val":"/product/"}]]},"search":{"testmode":true,"val":[[{"activation":"current_page_url","prop":"contains"}]]}},"els":null,"vars":[{"name":"logged_in","polling":"all","persist":"no","page_types":[],"testmode":false,"default":"false","code":"jQuery('.loggedIn').length > 0 || jQuery('.js-loggedInUser').length > 0 || jQuery('nav').find('.member').is(':visible') || jQuery('#AccountNavigationDropdown[style=\"display: block;\"]').length > 0 || jQuery('#MobileAccountMenuHeader button[data-ref=\"myAccount\"][style=\"display: block;\"]').length > 0;","trigger":""},{"name":"ever_logged_in","polling":"all","persist":"permanent","page_types":[],"testmode":false,"default":"false","code":"bouncex.vars.logged_in? true: null","trigger":""},{"name":"cart_qty","polling":"all","persist":"no","page_types":[],"testmode":false,"default":"0","code":"(function() {\n    var $checkoutDesktopQuantity = jQuery('#ch4_navCart').find('.ch4_headerCartNum');\n    var $otherQuantity = jQuery('.exp-cart-count');\n    var $miniCart = jQuery('.cart-jewel:eq(0)').text();\n    var quantity = 0;\n    if ($checkoutDesktopQuantity.length > 0) {\n        var checkoutDesktopQuantityText = jQuery.trim($checkoutDesktopQuantity.text());\n        if (checkoutDesktopQuantityText) {\n            quantity = checkoutDesktopQuantityText;\n        }\n    } else if ($otherQuantity.length > 0) {\n        var otherQuantityText = jQuery.trim($otherQuantity.text());\n        if (otherQuantityText) {\n            quantity = otherQuantityText;\n        }\n    } else if ($miniCart.length > 0) {\n        return $miniCart;\n    } else {\n        return jQuery('li a[title=\"Shopping Cart\"]:eq(0)').text() || 0;\n    }\n    return quantity;\n})();","trigger":""},{"name":"cart_total","polling":"all","persist":"visit","page_types":[],"testmode":false,"default":"0","code":"(function() {\n    var checkoutPage = window.location.href.indexOf('checkout') > -1;\n    var minicartPresent = jQuery('.cart-item-data.subtotal-row').length > 0;\n    \n    if (checkoutPage) {\n        return jQuery('#subTotalAmount').text().replace(/[^0-9.]/g,'') || null;\n    } else if (minicartPresent) {\n        return jQuery('.cart-item-data.subtotal-row').text().replace(/[^0-9.]/g,'') || null;\n    }\n    \n    return null;\n})();","trigger":""},{"name":"ios_chrome","polling":"none","persist":"no","page_types":[],"testmode":false,"default":"false","code":"bouncex.browser.ios && bouncex.browser.chrome","trigger":""},{"name":"modal_open","polling":"all","persist":"no","page_types":[],"testmode":false,"default":"false","code":"jQuery('.modal-mask-class').is(':visible')","trigger":""},{"name":"atc_modal_open","polling":"all","persist":"no","page_types":["product"],"testmode":false,"default":"false","code":"jQuery('.modal-scroll-container.u-full-height.u-full-width').is(':visible') || jQuery('.cart-item-data').is(':visible');","trigger":""},{"name":"native_submit","polling":"all","persist":"permanent","page_types":[],"testmode":false,"default":"false","code":"(function() {\n    if (window.top.location.href.indexOf('email_signup') > -1) {\n        if (jQuery('.modal-mask-class').find('.promo-wrapper').is(':visible')) {\n            return true;\n        }\n        if (jQuery('#email-sign-up').find('.promo-wrapper').is(':visible')) {\n            return true;\n        }\n    }\n    return null;\n})()","trigger":""},{"name":"homepage","polling":"none","persist":"no","page_types":[],"testmode":false,"default":"false","code":"(function() {\n    var currentPath = window.top.location.pathname;\n    var siteLanguage = '/us/en_us/';\n\n    return currentPath === siteLanguage || window.location.pathname === '/';\n})();","trigger":""},{"name":"chelsea_conf","polling":"all","persist":"no","page_types":[],"testmode":false,"default":"false","code":"(function() {\n    var $cartOptions = jQuery('.ch4_cartItemTitle');\n    var chesleaConversion = false;\n    if (window.top.location.href.indexOf('confirm') > -1) {\n        $cartOptions.each(function(a,b) {\n            var label = jQuery(this).text();\n            if (label.toLowerCase().indexOf('chelsea') > -1) {\n                chesleaConversion = true;\n                return false;\n            }\n        });\n        return chesleaConversion;\n    }\n    return false;\n})()","trigger":""},{"name":"ibx_test","polling":"none","persist":"visit","page_types":[],"testmode":false,"default":"false","code":"location.href.indexOf('ibx_test')>=0 || null;","trigger":""},{"name":"curr_url","polling":"all","persist":"no","page_types":[],"testmode":false,"default":"false","code":"(function() {\n    return window.top.location.pathname;\n})()","trigger":""},{"name":"cart","polling":"none","persist":"visit","page_types":[],"testmode":false,"default":"","code":"null;","trigger":""},{"name":"ck_limit","polling":"none","persist":"no","page_types":[],"testmode":false,"default":"false","code":"(function() {\n    /*cookie prevention: https://www.wrike.com/open.htm?id=173566393*/\n    function getBxCookieLength() {\n        var cookies = document.cookie.split(';');\n        var numCookies = cookies.length;\n        var bxCookieStringLength = 0;\n        for (var r = 0; r < numCookies; r++) {\n            var i = cookies[r];\n            while (i.charAt(0) == ' ') {\n                i = i.substring(1, i.length);\n            }\n            if (i.indexOf('bounceClientVisit') === 0) {\n                bxCookieStringLength += i.length;\n            }\n        }\n        return bxCookieStringLength;\n    }\n    var cookieLength = getBxCookieLength();\n    if (cookieLength > 1200) {\n        bouncex.cookie_too_large = true;\n    }\n})()","trigger":""},{"name":"vis_search","polling":"all","persist":"no","page_types":[],"testmode":false,"default":"false","code":"jQuery('.search-results-container.show').length > 0","trigger":""},{"name":"open_in_app_visible","polling":"none","persist":"no","page_types":[],"testmode":false,"default":"false","code":"bouncex.browser.safari && jQuery(window).innerHeight() != window.innerHeight;","trigger":""},{"name":"local_storage","polling":"none","persist":"no","page_types":[],"testmode":false,"default":"false","code":"!!bouncex.local_storage_enabled;","trigger":""},{"name":"converse_customer","polling":"all","persist":"no","page_types":[],"testmode":false,"default":"false","code":"(function(){\n  var prodTitle = jQuery('#ch4_contentColumn .ch4_cartItemTitle');\n  for(var i =0; i < prodTitle.length; i ++){\n    if(prodTitle.eq(i).text().toLowerCase().indexOf('converse') > -1){\n    \t\treturn true; \n    }\n  }\n  return null;\n})();","trigger":""},{"name":"no_bx","polling":"none","persist":"no","page_types":[],"testmode":false,"default":"false","code":"(function() {\n    /* https://www.wrike.com/open.htm?id=216314040*/\n    var cookie = bouncex.utils.cookies.read(bouncex.lz.decompressFromURI('M4VwDmBOCmzAQgexAOwMbQBpA'));\n    var suppressCookie = cookie && cookie == '1';\n    if (suppressCookie) {\n        baddjs = function() {};\n    }\n})()","trigger":""},{"name":"prod_price","polling":"none","persist":"no","page_types":["product"],"testmode":false,"default":"0","code":"(function(){\n    if (window.INITIAL_REDUX_STATE) {\n        var tag = window.INITIAL_REDUX_STATE.global.metaTags.meta.filter(function(tag){ return tag.property === \"og:price:amount\"; });\n        return tag[0].content;\n    } else {\n        return Number(document.getElementsByClassName('exp-pdp-local-price')[0].innerHTML.replace(/[^0-9.]/g,''));\n    }\n})();","trigger":""},{"name":"threshold_distance","polling":"vars","persist":"visit","page_types":[],"testmode":false,"default":"false","code":"(150 - bouncex.vars.cart_total).toFixed(2);","trigger":""},{"name":"same_product","polling":"all","persist":"no","page_types":[],"testmode":false,"default":"false","code":"bouncex.vars.prod_price - bouncex.vars.cart_total;","trigger":""},{"name":"product_clears","polling":"all","persist":"no","page_types":[],"testmode":false,"default":"false","code":"bouncex.vars.prod_price >= bouncex.vars.threshold_distance ? true : false;","trigger":""},{"name":"prod_name","polling":"none","persist":"no","page_types":["product"],"testmode":false,"default":"false","code":"(function(){\n  var tag = INITIAL_REDUX_STATE.global.metaTags.meta.filter(function(tag){ return tag.property === \"og:title\"; });\n  return tag[0].content.indexOf('. Nike.com') > -1 ? tag[0].content.replace('. Nike.com', '') : tag[0].content;\n})();","trigger":""},{"name":"imageurl","polling":"none","persist":"no","page_types":["product"],"testmode":false,"default":"false","code":"(function(){\n  var tag = INITIAL_REDUX_STATE.global.metaTags.meta.filter(function(tag){ return tag.property === \"og:image\"; });\n  return tag[0].content;\n})();","trigger":""},{"name":"products_tracked","polling":"none","persist":"visit","page_types":[],"testmode":false,"default":"0","code":"bouncex.parseJSON(localStorage.getItem('bxProdHist')).length || null;","trigger":""},{"name":"prod_category","polling":"none","persist":"no","page_types":["product"],"testmode":false,"default":"false","code":"(function(){\n    var str = document.getElementById('chatModule').getAttribute('data-category-id');\n    return str.replace(/\\w\\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});\n})();","trigger":""},{"name":"size_selected","polling":"all","persist":"no","page_types":[],"testmode":false,"default":"false","code":"jQuery('div[name=skuAndSize] input').is(':checked');","trigger":"pageload"},{"name":"products_tracked_realtime","polling":"none","persist":"permanent","page_types":[],"testmode":false,"default":"false","code":"null;","trigger":"pageload"},{"name":"swimlane","polling":"all","persist":"visit","page_types":[],"testmode":false,"default":"false","code":"bouncex.getBounceCookie('neo.swimlane');","trigger":"pageload"},{"name":"coupon_code","polling":"none","persist":"permanent","page_types":[],"testmode":false,"default":"false","code":"null;","trigger":"pageload"},{"name":"return_coupon_code","polling":"none","persist":"no","page_types":[],"testmode":false,"default":"false","code":"bouncex.utils.getParam('bx_code') || false;","trigger":"pageload"},{"name":"mobile_nav_visible","polling":"all","persist":"no","page_types":[],"testmode":false,"default":"false","code":"jQuery('nav.l-mobile-nav-menu').css('visibility') === 'visible' || jQuery('.exp-panel--contains-globalNav.exp-panel--show-panel').length > 0 ? true : false;","trigger":"pageload"},{"name":"item_added_to_cart","polling":"all","persist":"no","page_types":[],"testmode":false,"default":"false","code":"(function() {\n    /* checks if the item was added to cart in the current pageview */\n    var atcModalOpen = jQuery('.modal-scroll-container.u-full-height.u-full-width').is(':visible') || jQuery('.cart-item-data').is(':visible');\n\n    if (bouncex.vars.item_added_to_cart || atcModalOpen) {\n        return true;\n    }\n})();","trigger":"pageload"},{"name":"dev_test_ctotal","polling":"all","persist":"visit","page_types":[],"testmode":false,"default":"false","code":"(function() {\n    var checkoutPage = window.location.href.indexOf('checkout') > -1;\n    var minicartPresent = jQuery('.cart-item-data.subtotal-row').length > 0;\n    \n    if (checkoutPage) {\n        return jQuery('#subTotalAmount').text().replace(/[^0-9.]/g,'') || null;\n    } else if (minicartPresent) {\n        return jQuery('.cart-item-data.subtotal-row').text().replace(/[^0-9.]/g,'') || null;\n    }\n    \n    return null;\n})();","trigger":"pageload"},{"name":"cart_plurality","polling":"none","persist":"visit","page_types":[],"testmode":false,"default":"false","code":"bouncex.vars.cart_qty > 1 ? 'items' : 'item';","trigger":"pageload"},{"name":"hero_video_visible","polling":"all","persist":"no","page_types":[],"testmode":false,"default":"false","code":"jQuery('.nike-cq-overlay .video-thumbnail:visible, .nike-cq-video-overlay .video-js:visible').length > 0;","trigger":"pageload"}],"dgu":"pixel.cdnwidget.com","dgp":false,"ba":{"enabled":0,"fbte":0},"biu":"assets.bounceexchange.com","bau":"api.bounceexchange.com","beu":"events.bouncex.net","ibx":{"tjs":"bouncex.util = {\n\n\taddNamespace: function(obj, name) {\n\t\tvar namespacedObj = {};\n\t\tfor (var k in obj) {\n\t\t\tif (obj.hasOwnProperty(k)) {\n\t\t\t\tvar namespacedKey = k;\n\t\t\t\tif (k.indexOf(':') === -1) {\n\t\t\t\t\tnamespacedKey = name + ':' + k;\n\t\t\t\t}\n\t\t\t\tnamespacedObj[namespacedKey] = obj[k];\n\t\t\t}\n\t\t}\n\t\treturn namespacedObj;\n\t},\n\n\tgetOrigin: function() {\n\t\treturn window.location.origin || window.location.protocol + '//' + window.location.hostname + (window.location.port ? (':' + window.location.port) : '');\n\t},\n\n\t//copied from bouncex.ibx\n\tgetParam: function(name, qstring) {\n\t\tvar param_string = qstring ? ('?' + qstring) : window.location.href;\n\t\tname = name.replace(/[\\[]/,\"\\\\\\[\").replace(/[\\]]/,\"\\\\\\]\");\n\t\tvar regexS = \"[\\\\?&#]\"+name+\"=([^&#]*)\";\n\t\tvar regex = new RegExp( regexS );\n\t\tvar results = regex.exec( param_string );\n\t\tif( results == null ) return \"\";\n\t\telse return decodeURIComponent(results[1]);\n\t},\n\n\tgetTimeMs: function() {\n\t\treturn (new Date().getTime());\n\t},\n\n\tisValidInteger: function(val) {\n\t\t// returns true for 0, '0', 1, '1'. False for '', undefined\n\t\treturn !isNaN(parseInt(val));\n\t},\n\n\t//copied from bouncex.ibx\n\tisValidEmail: function(email) {\n\t\tvar regex = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\t\treturn regex.test(email);\n\t},\n\n\tisValidUrl: function(url, type) {\n\t\t//JKMD: type could differentiate between absolute/relative, allow mailto links, etc\n\t\tvar regex = /^(http|https):\\/\\/(([a-zA-Z0-9$\\-_.+!*'(),;:&=]|%[0-9a-fA-F]{2})+@)?(((25[0-5]|2[0-4][0-9]|[0-1][0-9][0-9]|[1-9][0-9]|[0-9])(\\.(25[0-5]|2[0-4][0-9]|[0-1][0-9][0-9]|[1-9][0-9]|[0-9])) {3})|localhost|([a-zA-Z0-9\\-\\u00C0-\\u017F]+\\.)+([a-zA-Z]{2,}))(:[0-9]+)?(\\/(([a-zA-Z0-9$\\-_.+!*'(),;:@&=]|%[0-9a-fA-F]{2})*(\\/([a-zA-Z0-9$\\-_.+!*'(),;:@&=]|%[0-9a-fA-F]{2})*)*)?(\\?([a-zA-Z0-9$\\-_.+!*'(),;:@&=\\/?]|%[0-9a-fA-F]{2})*)?(\\#([a-zA-Z0-9$\\-_.+!*'(),;:@&=\\/?]|%[0-9a-fA-F]{2})*)?)?$/;\n\t\treturn regex.test(url);\n\t},\n\n\tmakeQuerystring: function(o) {\n\t\tvar a=[],s='';\n\t\tfor(var k in o) {\n\t\t\tif(!o.hasOwnProperty(k)) continue;\n\t\t\ta.push(k+'='+encodeURIComponent(o[k]));\n\t\t}\n\t\treturn a.join('&');\n\t},\n\n\tmergeObject: function () {\n\t\tvar o = {};\n\t\tfor (var k in arguments) {\n\t\t\tvar a = arguments[k];\n\t\t\tif (typeof a == 'object') {\n\t\t\t\tfor (var k in a) {\n\t\t\t\t\tif (a.hasOwnProperty(k)) o[k] = a[k];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn o;\n\t}\n};\n\nbouncex.util.cookies = {\n\n\tdomain: window.bouncex.cookie_domain,\n\n\tcreate: function(obj){\n\t\tdefaults = {\n\t\t\tname : '',\n\t\t\tvalue : '',\n\t\t\tdomain : false,\n\t\t\tdays : 14\n\t\t};\n\t\tobj = bouncex.util.mergeObject(defaults, obj);\n\n\t\tif (!obj.name) { return false; }\n\n\t\tvar date = new Date();\n\t\tdate.setTime(date.getTime() + obj.days * 24 * 60 * 60 * 1e3);\n\t\tvar exp = '; expires=' + date.toGMTString();\n\n\t\tvar cookieString = obj.name + '=' + obj.value + exp + '; path=/;';\n\t\tif (obj.domain){\n\t\t\tcookieString += 'domain=' + obj.domain + ';';\n\t\t}\n\t\tdocument.cookie = cookieString;\n\t},\n\n\tdestroy: function (name) {\n\t\treturn this.create({\n\t\t\tname : name,\n\t\t\tdays : -1,\n\t\t});\n\t},\n\n\tread: function (name) {\n\t\t//return this.multi.get(name);\n\t\tvar t = name + \"=\", vars = document.cookie.split(\";\");\n\t\tfor (var r = 0; r < vars.length; r++) {\n\t\t\tvar i = vars[r];\n\t\t\twhile (i.charAt(0) == \" \")i = i.substring(1, i.length);\n\t\t\tif (i.indexOf(t) == 0)return i.substring(t.length, i.length);\n\t\t}\n\t\treturn null;\n\t}\n};\n\n// if utk is already defined persist whatever listeners it has before wipe\nvar previousListeners = bouncex.utk && bouncex.utk.listeners;\n\nbouncex.utk = {\n\t\n\tlisteners: previousListeners || {},\n\n\taddMetadata: function(obj) {\n\t\tvar m = this.getMetadata();\n\t\treturn bouncex.util.mergeObject(obj, m);\n\t},\n\n\tgetMetadata: function() {\n\t\treturn {\n\t\t\t'page:type': this.getPageType(),\n\t\t\t'customer:hasconverted': (bouncex.cookie.lc?1:0)\n\t\t};\n\t},\n\n\tgetPageType: function() {\n\t\treturn \"\";\n\t},\n\n\thoverItem: function(obj) {\n\t\tvar defaults = {\n\t\t\teventName: 'hover item',\n\t\t\titemTracking: false,\n\t\t\tselector: '',\n\t\t\tmaxItems: 5,\n\t\t\ttimeoutMs: 1000,\n\t\t\tgetItemData: function(el) { return null; },\n\t\t};\n\n\t\tobj = bouncex.util.mergeObject(defaults, obj);\n\n\t\t//validation here\n\t\tif (!obj.selector) { return null; }\n\n\t\t//register the tracker\n\t\tobj.stop = removeHoverTracking;\n\t\tvar trackerId = bouncex.utk.register(obj);\n\t\tvar timeout;\n\t\tvar ids = [];\n\n\t\tfunction onMouseenter() {\n\t\t\tclearTimeout(timeout);\n\t\t\tvar el = this;\n\t\t\ttimeout = setTimeout(function() {\n\t\t\t\tvar item = obj.getItemData(el);\n\t\t\t\tif (!item.id) { return; }\n\t\t\t\t//if not already tracked\n\t\t\t\tif (ids.indexOf(item.id) === -1) {\n\t\t\t\t\t//add id to list of tracked items\n\t\t\t\t\tids.push(item.id);\n\t\t\t\t\t//track the event\n\t\t\t\t\tvar itemEventData = { eventName: obj.eventName, item: item };\n\t\t\t\t\tbouncex.utk.trackItemInteraction(itemEventData);\n\t\t\t\t\t//track the item\n\t\t\t\t\tif (obj.itemTracking) {\n\t\t\t\t\t\tbouncex.utk.trackItem(item);\n\t\t\t\t\t}\n\t\t\t\t\t//check limits\n\t\t\t\t\tif (ids.length >= obj.maxItems) {\n\t\t\t\t\t\tremoveHoverTracking();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, obj.timeoutMs);\n\t\t}\n\n\t\tfunction onMouseleave() {\n\t\t\tclearTimeout(timeout);\n\t\t}\n\n\t\tfunction addHoverTracking() {\n\t\t\tjQuery(document).on('mouseenter.bx-tracking-hover.' + trackerId, obj.selector, onMouseenter);\n\t\t\tjQuery(document).on('mouseleave.bx-tracking-hover.' + trackerId, obj.selector, onMouseleave);\n\t\t}\n\n\t\tfunction removeHoverTracking() {\n\t\t\tjQuery(document).off('mouseenter.bx-tracking-hover.' + trackerId);\n\t\t\tjQuery(document).off('mouseleave.bx-tracking-hover.' + trackerId);\n\t\t\tclearTimeout(timeout);\n\t\t}\n\n\t\taddHoverTracking();\n\t\treturn trackerId;\n\t},\n\n\tisIdentified: function(){\n\t\treturn !!(bouncex.cookie.uid || bouncex.getBounceCookie('__ibxu'));\n\t},\n\n\tmiw: function(obj) {\n\t\tvar defaults = {\n\t\t\tselector: 'input:not(input[type=button], :input[type=submit], :input[type=reset], :input[type=hidden], :input[type=radio], :input[type=checkbox], :input[type=image], :input[type=password])',\n\t\t\tgetUserData: function(el) {\n\t\t\t\treturn {\n\t\t\t\t\temail : jQuery(el).val(),\n\t\t\t\t\tsource : el.id,\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\n\t\tobj = bouncex.util.mergeObject(defaults, obj);\n\t\tif (!obj.selector) { return null; }\n\n\t\t//register the tracker\n\t\tobj.stop = removeUserTracking;\n\t\tvar trackerId = bouncex.utk.register(obj);\n\n\t\tfunction onBlur() {\n\t\t\tvar user = obj.getUserData(this);\n\t\t\tbouncex.utk.trackUser(user);\n\t\t}\n\n\t\tfunction removeUserTracking() {\n\t\t\tjQuery(document).off('blur.miw.' + trackerId);\n\t\t}\n\n\t\tjQuery(document).on('blur.miw.' + trackerId, obj.selector, onBlur);\n\n\t\treturn trackerId;\n\t},\n\n\tmuu: function(){\n\t\tvar match = location.href.match(/([a-zA-Z0-9._\\+-]+(?:@|%40)[a-zA-Z0-9._-]+\\.[a-zA-Z0-9._-]+)/gi);\n\t\tif (match){\n\t\t\tbouncex.utk.trackUser({\n\t\t\t\temail: decodeURIComponent(match[0]),\n\t\t\t\tsource: 'URL'\n\t\t\t});\n\t\t}\n\t},\n\n\tquickviewItem: function(obj) {\n\t\tvar defaults = {\n\t\t\teventName: 'view item',\n\t\t\titemTracking: false,\n\t\t\tselector: '',\n\t\t\tgetItemData: function(el) { return null; }\n\t\t};\n\n\t\tobj = bouncex.util.mergeObject(defaults, obj);\n\t\t//validation here\n\t\tif (!obj.selector) { return null; }\n\n\t\tvar prevVisible = false,\n\t\t\tvisible;\n\n\t\treturn bouncex.utk.setInterval({\n\t\t\tcallback: function() {\n\t\t\t\tvisible = jQuery(obj.selector).is(':visible');\n\t\t\t\tif (visible && !prevVisible) {\n\t\t\t\t\tvar item = obj.getItemData(obj.selector);\n\n\t\t\t\t\tvar itemEventData = { eventName: obj.eventName, item: item };\n\t\t\t\t\tbouncex.utk.trackItemInteraction(itemEventData);\n\t\t\t\t\t//track the item\n\t\t\t\t\tif (obj.itemTracking) {\n\t\t\t\t\t\tbouncex.utk.trackItem(item);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tprevVisible = visible;\n\t\t\t}\n\t\t});\n\t},\n\n\trequestEmail: function(obj) {\n\t\t//make sure email is specified and valid\n\t\tif (!obj['email'] && !obj['user:email']){\n\t\t\treturn false;\n\t\t}\n\n\t\tif (obj['email'] && !bouncex.util.isValidEmail(obj['email'])){\n\t\t\treturn false;\n\t\t}\n\n\t\tif (obj['user:email'] && !bouncex.util.isValidEmail(obj['user:email'])){\n\t\t\treturn false;\n\t\t}\n\n\t\t//JKMD: bouncex.push right now automatically adds namespacing, which would mess up \"campaignid\"\n\t\tparams = {};\n\t\tfor (var k in obj) {\n\t\t\tif (obj.hasOwnProperty(k)){\n\t\t\t\tparams[k.toLowerCase()] = obj[k];\n\t\t\t}\n\t\t}\n\t\tevent_stream_report('requestemail', params);\n\t},\n\n\t//JKMD: long-term plan is to put all of our polling into a single setInterval\n\tsetInterval: function(obj) {\n\t\tvar defaults = {\n\t\t\tmilliseconds: 1000,\n\t\t\tcallback: function() { return null; }\n\t\t};\n\t\tobj = bouncex.util.mergeObject(defaults, obj);\n\t\tvar intervalId = setInterval(obj.callback, obj.milliseconds);\n\n\t\tobj.stop = removeInterval;\n\t\tvar trackerId = bouncex.utk.register(obj);\n\t\tfunction removeInterval() {\n\t\t\tclearInterval(intervalId);\n\t\t}\n\t\treturn trackerId;\n\t},\n\n\ttrackItem: function(item) {\n\t\tif (typeof(item.id) === 'string'){\n\t\t\titem.id = item.id.trim().toLowerCase();\n\t\t}\n\t\tif (!this.validateItem(item)) {\n\t\t\t//bouncex.log('item failed validation', item);\n\t\t\treturn false;\n\t\t}\n\t\titem = bouncex.util.addNamespace(item, 'item');\n\t\tbouncex.push(['item', item]);\n\t},\n\n\ttrackItemInteraction: function(obj) {\n\t\tvar id = obj.item.id;\n\t\tif (typeof(id) === 'string'){\n\t\t\tid = id.trim().toLowerCase();\n\t\t}\n\t\tvar o = { 'item:id': id };\n\t\to = this.addMetadata(o);\n\t\tbouncex.push([obj.eventName, o]);\n\t},\n\n\ttrackListPage: function(obj){\n\t\tvar defaults = {\n\t\t\teventName: 'view ' + this.getPageType(),\n\t\t\tmaxItems: 6,\n\t\t\tselector: '',\n\t\t\ttitle: '',\n\t\t\turl: jQuery('link[rel=canonical]').attr('href') || window.location.href.split('?')[0],\n\t\t\titemTracking : false,\n\t\t\tgetItemData: function(el) { return null;},\n\t\t\textraEventData: {}\n\t\t};\n\n\t\tobj = bouncex.util.mergeObject(defaults, obj);\n\n\t\tvar items = jQuery(obj.selector);\n\t\tif (!items || !items.length){\n\t\t\treturn false;\n\t\t}\n\t\tvar itemsTracked = 0;\n\t\tvar itemIds = [];\n\t\tfor (var i = 0; i < items.length && itemsTracked < obj.maxItems; i++) {\n\t\t\tvar item = obj.getItemData(items[i]);\n\t\t\tif (item.id){\n\t\t\t\tif (typeof(item.id) === 'string'){\n\t\t\t\t\titem.id = item.id.trim().toLowerCase();\n\t\t\t\t}\n\t\t\t\t// add id to list\n\t\t\t\titemIds.push(item.id);\n\t\t\t\tif (obj.itemTracking){\n\t\t\t\t\t//track full item\n\t\t\t\t\tthis.trackItem(item);\n\t\t\t\t}\n\t\t\t\titemsTracked++;\n\t\t\t}\n\t\t}\n\n\t\tvar o = {'items:ids' : itemIds.join(','), 'page:url' : obj.url};\n\t\tif (obj.title){\n\t\t\to['page:title'] = obj.title;\n\t\t}\n\t\to = this.addMetadata(o);\n\t\to = bouncex.util.mergeObject(o, obj.extraEventData);\n\t\tbouncex.push([obj.eventName, o]);\n\t},\n\n\ttrackUser: function(user) {\n\t\tif (!user.email && !user.emailHash) {\n\t\t\treturn false;\n\t\t}\n\t\tif (user.email && !bouncex.util.isValidEmail(user.email)){\n\t\t\treturn false;\n\t\t}\n\t\tvar params = bouncex.util.addNamespace(user, 'user');\n\t\tif (user.email) {\n\t\t\tparams['user:email'] = user.email;\n\t\t}\n\t\tif (user.emailHash) {\n\t\t\tparams['user:emailhash'] = user.emailHash;\n\t\t}\n\t\tif (user.campaignId) {\n\t\t\tparams['campaignid'] = user.campaignId;\n\t\t}\n\t\tparams['user:gcr'] = (bouncex && bouncex.cookie) ? bouncex.cookie.gcr : 99;\n\t\tparams['agent'] = 'js';\n\t\tparams['eq'] = 1;\n\n\t\tevent_stream_report('user', params);\n\n\t\tbouncex.cookie.uid = 1;\n\t\tsetBounceCookie();\n\t\t//legacy support\n\t\tbouncex.util.cookies.create({\n\t\t\tname: '__ibxu',\n\t\t\tvalue : '1',\n\t\t\tdomain : '.' + bouncex.util.cookies.domain,\n\t\t\tdays : 365,\n\t\t});\n\n\t},\n\n\tvalidateItem: function(item) {\n\t\tif (!item) { return false; }\n\t\tif (!item.id) { return false; }\n\t\tif (!item.copy) { return false; }\n\t\tif (!item.imageurl || !bouncex.util.isValidUrl(item.imageurl)) { return false; }\n\t\tif (!item.url || !bouncex.util.isValidUrl(item.url)) { return false; }\n\t\treturn true;\n\t},\n\n\tviewItem: function(obj) {\n\t\tvar defaults = {\n\t\t\teventName: 'view item',\n\t\t\titemTracking: true,\n\t\t\tgetItemData: function() { return null; }\n\t\t};\n\n\t\tobj = bouncex.util.mergeObject(defaults, obj);\n\n\t\tvar item = obj.getItemData();\n\n\t\tif (obj.itemTracking) {\n\t\t\tthis.trackItem(item);\n\t\t}\n\n\t\tif (item.id) {\n\t\t\tvar itemEventData = { eventName: obj.eventName, item: item };\n\t\t\tbouncex.utk.trackItemInteraction(itemEventData);\n\t\t} else {\n\t\t\t//bouncex.log('no item id', obj.eventName, item);\n\t\t}\n\t},\n\n\t//keeping track of the listeners inside tracking\n\tregister: function(obj) {\n\t\tvar id = bouncex.util.getTimeMs() + Math.random();\n\t\tbouncex.utk.listeners[id] = obj;\n\t\treturn id;\n\t},\n\n\t//remove single tracker\n\tstop: function(id) {\n\t\tif (bouncex.utk.listeners.hasOwnProperty(id)) {\n\t\t\tbouncex.utk.listeners[id].stop();\n\t\t\tdelete bouncex.utk.listeners[id];\n\t\t}\n\t},\n\n\t//remove all listeners\n\tstopAll: function() {\n\t\tfor (var id in bouncex.utk.listeners) {\n\t\t\tbouncex.utk.stop(id);\n\t\t}\n\t}\n};\n\nbouncex.utk.cart = {\n\n\tgetCart: function() {\n\t\tif (this.state) {\n\t\t//cached here once we look it up or save\n\t\t\treturn this.state;\n\t\t}else if (this.config.storeCartVariable && bouncex.vars[this.config.storeCartVariable]) {\n\t\t//look up from cvar if it exists\n\t\t\tthis.state = JSON.parse(bouncex.vars[this.config.storeCartVariable]);\n\t\t\treturn this.state;\n\t\t}else {\n\t\t\treturn {};\n\t\t}\n\t},\n\n\tgetCount: function(){\n\t\treturn bouncex.vars[this.config.cartCountVariable];\n\t},\n\n\tinferCount: function(cart) {\n\t\t// return cart.count if specified and valid\n\t\tif (bouncex.util.isValidInteger(cart.count)) {\n\t\t\treturn parseInt(cart.count);\n\t\t} else if (cart.items) {\n\t\t\t// deduce from items length (using qty property if specified)\n\t\t\tvar count = 0;\n\t\t\tfor (var i = 0; i < cart.items.length; i++) {\n\t\t\t\tvar qty = parseInt(cart.items[i].qty) || 1;\n\t\t\t\tcount += qty;\n\t\t\t}\n\t\t\treturn count;\n\t\t}else if (bouncex.util.isValidInteger(this.getCount())){\n\t\t\treturn parseInt(this.getCount());\n\t\t}else{\n\t\t\treturn 0;\n\t\t}\n\t},\n\n\tinit: function(obj) {\n\t\tvar defaults = {\n\t\t\t// lastReplenishment: false,\n\t\t\tstoreCartVariable: 'cart',\n\t\t\tcartCountVariable: 'cart_qty',\n\t\t\tmaxVariableSize: 400,\n\t\t\tstoreValues: ['count', 'items'],\n\t\t\tmaxItems: 10\n\t\t};\n\t\tobj = bouncex.util.mergeObject(defaults, obj);\n\t\tthis.config = obj;\n\n\t\t//JKMD: should we do this via init, or just override explicitly...?\n\t\tthis.replenish = obj.replenish || this.replenish;\n\t\tthis.validateReplenishment = obj.validateReplenishment || this.validateReplenishment;\n\t\tthis.reportReplenishment = obj.reportReplenishment || this.reportReplenishment;\n\n\t\tthis.initFromQuerystring();\n\t\tthis.reportReplenishment();\n\t},\n\n\tinitFromQuerystring: function() {\n\t\tvar bx_cart = bouncex.util.getParam('bx_cart');\n\t\tvar cart = {};\n\t\tthis.replenishing = false;\n\n\t\tif (bx_cart) {\n\t\t\t//JKMD: support base64\n\t\t\tif (bx_cart.charAt(0) !== '{') {\n\t\t\t\tbx_cart = atob(bx_cart);\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tcart = JSON.parse(bx_cart);\n\t\t\t} catch(e) { console.log(e); return false; }\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!this.validateReplenishment(cart)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tvar cartCopy = jQuery.extend(true,{},cart);\n\t\tthis.save(cartCopy);\n\t\tthis.replenishing = true;\n\t\treturn this.replenish(cart);\n\t},\n\n\treplenish: function(cart) {\n\t\treturn null;\n\t},\n\n\tsave: function(cart) {\n\t\tif (!cart) { return false; }\n\t\tthis.state = cart;\n\t\tif (this.config.storeCartVariable) {\n\t\t\tvar storedCart = {};\n\t\t\tif (cart.count === 0) {\n\t\t\t\t// if count is 0, don't store any other info\n\t\t\t\tstoredCart = { count: 0 };\n\t\t\t}else{\n\t\t\t\t//store values specified in settings\n\t\t\t\tfor (var i = 0; i < this.config.storeValues.length; i++) {\n\t\t\t\t\tvar k = this.config.storeValues[i];\n\t\t\t\t\tif (cart.hasOwnProperty(k)) {\n\t\t\t\t\t\tstoredCart[k] = cart[k];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.checkAndSetVar(storedCart);\n\t\t}\n\t},\n\n\tcheckAndSetVar: function(storedCart) {\n\t\tvar cartString = JSON.stringify(storedCart);\n\t\tif (cartString.length <= this.config.maxVariableSize) {\n\t\t\tbouncex.setv(this.config.storeCartVariable, cartString);\n\t\t\tsetBounceCookie();\n\t\t} else if (storedCart.items && storedCart.items.length) {\n\t\t\tvar lastItemLength = JSON.stringify(storedCart.items[storedCart.items.length-1]).length;\n\t\t\tif ( lastItemLength >= this.config.maxVariableSize) {\n\t\t\t\tstoredCart.items.pop();\n\t\t\t} else {\n\t\t\t\tstoredCart.items.shift();\n\t\t\t}\n\t\t\tthis.checkAndSetVar(storedCart);\n\t\t}\n\t},\n\n\ttrack: function(cart) {\n\t\tvar trackCart = bouncex.util.mergeObject(cart);\n\t\tif (trackCart.items) trackCart.items = JSON.stringify(trackCart.items);\n \t\tif (trackCart.ids) trackCart.ids = trackCart.ids.join(',');\n\t\ttrackCart = bouncex.util.addNamespace(trackCart, 'cart');\n\t\tbouncex.push(['cart', trackCart]);\n\t},\n\n\tupdate: function (cart) {\n\n\t\tif (this.replenishing){\n\t\t\t/* don't fire cart events while replenishing */\n\t\t\treturn false;\n\t\t}\n\n\t\tif (cart.newItem) {\n\t\t\t//if partial, merge new item with stored items\n\t\t\tvar oldCart = this.getCart();\n\t\t\tvar allItems = oldCart.items || [];\n\t\t\tallItems.push(cart.newItem);\n\t\t\tcart.items = allItems;\n\t\t}\n\n\t\t//set count\n\t\tcart.count = this.inferCount(cart);\n\n\t\t// remove items from beginning of items array if over limit\n\t\tif (this.config.maxItems && cart.items && cart.items.length > this.config.maxItems) {\n\t\t\tcart.items = cart.items.slice(cart.items.length - this.config.maxItems);\n\t\t}\n\n\t\t//auto parse ids from items variable if no ids specified\n\t\tif (!cart.ids && cart.items) {\n\t\t\tvar ids = [];\n\t\t\tfor (var i = 0; i < cart.items.length; i++) {\n\t\t\t\tif (cart.items[i].id) {\n\t\t\t\t\tids.push(cart.items[i].id);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (ids.length) { cart.ids = ids; }\n\t\t}\n\n\t\tif (cart.newItem || cart.addToCart){\n\t\t\tbouncex.push(['add to cart', bouncex.utk.getMetadata()]);\n\t\t}\n\t\t\n\t\tdelete cart.newItem;\n\t\tdelete cart.addToCart;\n\t\t// save in cart.state, and in cvar if specified\n\t\tthis.save(cart);\n\t\t//track cart\n\t\tthis.track(cart);\n\t\t//fire add to cart event if new item or addToCart flag\n\t},\n\n\tvalidateReplenishment: function(cart) {\n\t\tvar cartCount = bouncex.utk.cart.getCount();\n\t\tif (bouncex.util.isValidInteger(cartCount) && cartCount > 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!cart) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!cart.value && !cart.token && !cart.items) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t},\n\n\treportReplenishment: function() {\n\t\tvar bx_replen = bouncex.util.getParam('bx_replen');\n\t\tif (bx_replen) {\n\t\t\tsetTimeout(function(){\n\t\t\t\tvar cartCount = bouncex.utk.cart.getCount();\n\t\t\t\tbouncex.push(['cart replenish', {'cart:count': cartCount, 'cart:success': cartCount > 0}]);\n\t\t\t}, 1100);\n\t\t}\n\t}\n};\n\n\nbouncex.utk.getPageType = function() {\n\tif (jQuery('meta[property=\"og:type\"]').attr('content') == \"product\" || jQuery('#PDP').length > 0) {\n\t\tif (jQuery('#idPDP').length){\n\t\t\treturn 'nike id product';\n\t\t}else{\n\t\t\treturn 'product';\n\t\t}\n\t}\n\tvar pageData = jQuery('#pageTrackingDataElement').text() ? JSON.parse(jQuery('#pageTrackingDataElement').text()) : {};\n\tif (pageData.response && pageData.response.pageType == 'productgrid') {\n\t\treturn 'category';\n\t}\n\tif (pageData.response && pageData.response.pageType == 'onsite search') {\n\t\treturn 'search';\n\t}\n\n\tif (document.location.pathname.indexOf('checkout/html/cart') > -1 || document.location.pathname.indexOf('checkout/mobile/cart') > -1){\n\t\treturn 'cart';\n\t}\n\n\treturn '';\n\n};\n\nfunction getIdFromUrl(url){\n\tvar match = url.match(/\\/pid-(\\d+)\\//);\n\tif (match){\n\t\treturn match[1];\n\t}\n\treturn false;\n\t// var nikeId1 = bouncex.util.getParam('piid', url);\n\t// var nikeId2 = bouncex.util.getParam('pbid', url);\n\t// if (nikeId1 && nikeId2){\n\t// \treturn nikeId1 + nikeId2\n\t// }\n}\n\nfunction getMobileProductId(){\n  var backUpId = bouncex.utils.getParam('prodID',jQuery('script[id=\"neo\"]').nextAll('script[type=\"text/javascript\"]').eq(1).attr('src')) || false;\n  var urlId = getIdFromUrl(window.location.href)\n  var resxId = window.resx ? window.resx.itemid : false\n  var id = backUpId || urlId || resxId\n\treturn {\n\t\tid: id\n\t}\n}\n\nfunction getTESTMobileProductId(){\n    var backUpIdMbile = bouncex.utils.getParam('prodID',jQuery('script[id=\"neo\"]').nextAll('script[type=\"text/javascript\"]').eq(1).attr('src')) || false;\n    return {\n        id: getIdFromUrl(window.location.href) || backUpIdMbile\n    }\n}\n\n\nfunction getListpageId(el){\n\tvar url = jQuery(el).find('a').first().attr('href');\n\treturn {\n\t\tid: getIdFromUrl(url),\n\t}\n}\n\n\nfunction getProductItemData(){\n\tvar id = getIdFromUrl(window.location.href) || window.resx ? window.resx.itemid: false;\n\tvar url = jQuery('link[rel=canonical]').attr('href');\n\tif (url && id){\n\t\turl = url.replace(/pid-\\d+/, 'pid-'+id);\n\t}\n\treturn {\n\t\timageurl : jQuery('meta[property=\"og:image\"]').attr('content') || window.getProductItemData().imageurl,\n\t\tid       : id,\n\t\tcopy     : jQuery('.hero-image-container > img').attr('alt') || jQuery('meta[name=keywords]').attr('content'),\n\t\turl      : window.location.href.indexOf('?') > -1 ? window.location.href.split('?')[0]: window.location.href,\n\t\tcategory : bouncex.vars.prod_category || jQuery('h2.exp-product-subtitle').text(),\n\t\tprice\t : bouncex.vars.prod_price || jQuery('.exp-pdp-local-price.js-pdpLocalPrice:first').text(),\n\t\tinstock  : (jQuery('#buyTools button.addToCartBtn:visible').length > 0 || jQuery('#buyingtools-add-to-cart-button').length >0) ? 1 : 0\n\t}\n\t\t\n}\n\nfunction getTESTProductItemData(){\n    try{\n    \tvar backUpId = bouncex.utils.getParam('prodID',jQuery('script[id=\"neo\"]').nextAll('script[type=\"text/javascript\"]').eq(1).attr('src')) || false;\n    \tvar id = getIdFromUrl(window.location.href) || backUpId;\n    \tvar url = jQuery('link[rel=canonical]').attr('href');\n    \tif (url && id){\n    \t\turl = url.replace(/pid-\\d+/, 'pid-'+id);\n    \t}\n    \treturn {\n    \t\timageurl : jQuery('meta[property=\"og:image\"]').attr('content') || window.getProductItemData().imageurl,\n    \t\tid       : id,\n    \t\tcopy     : jQuery('.hero-image-container > img').attr('alt') || jQuery('meta[name=keywords]').attr('content'),\n    \t\turl      : window.location.href.indexOf('?') > -1 ? window.location.href.split('?')[0]: window.location.href,\n    \t\tcategory : bouncex.vars.prod_category || document.getElementById('chatModule') && document.getElementById('chatModule').getAttribute('data-category-id'),\n    \t\tprice\t : bouncex.vars.prod_price ||  window.INITIAL_REDUX_STATE && window.INITIAL_REDUX_STATE.global && window.INITIAL_REDUX_STATE.global.metaTags && window.INITIAL_REDUX_STATE.global.metaTags.meta[10] && window.INITIAL_REDUX_STATE.global.metaTags.meta[10].content,\n    \t\tinstock  : (jQuery('#buyTools button.addToCartBtn:visible').length > 0 || jQuery('#buyingtools-add-to-cart-button').length >0) ? 1 : 0\n    \t}    \n    }catch(e) {\n        return {\n            imageurl : null,\n    \t\tid       : null,\n    \t\tcopy     : null,\n    \t\turl      : null,\n    \t\tcategory : null,\n    \t\tprice\t : null,\n    \t\tinstock  : null\n    \t}\n    }\n}\n\n        \nfunction getFromWindow(data){\n\tif(window && window.nike && window.nike.globalData && window.nike.globalData.pdpData){\n\t\tif(window.nike.globalData.pdpData[data]){\t\t\t\n\t\t\treturn window.nike.globalData.pdpData[data];\n\t\t}\n\t}\n\treturn false;\n}\n\nfunction getNikeIdProductData(){\n\tvar imageUrl = getFromWindow('imagesHeroLarge'),\n\tcategory = getFromWindow('trackingData'),\n\tprice = getFromWindow('trackingData');\n\treturn {\n\t\timageurl : imageUrl ? imageUrl[0] : false,\n\t\tid       : getFromWindow('productId'),\n\t\tcopy     : getFromWindow('displayName'),\n\t\turl      : jQuery('link[rel=canonical]').length > 0 ? jQuery('link[rel=canonical]').attr('href') : false,\n\t\tcategory : category && category['product'] && category['product']['category'] ? category['product']['category'] : false,\n\t\tprice    : price && price['product'] && price['product']['price'] ? price['product']['price'] : false,\n\t\tinstock  : jQuery('button.add-to-cart__button:visible').length > 0 ? 1 : 0\n\t}\n}\n\nfunction trackAddToCart(){\n\tvar newCount = bouncex.utk.cart.getCount();\n\tvar oldCount = bouncex.utk.cart.getCart().count || 0;\n\tif (newCount > oldCount){\n\t\tvar item = {};\n\t\tif (bouncex.utk.getPageType() == 'nike id product'){\n\t\t\titem.id = 'nikeid';\n\t\t}else{\n\t\t\titem.id = getIdFromUrl(jQuery('link[rel=canonical]').attr('href'));\n\t\t}\n\t\tif (item.id){\n\t\t\tbouncex.utk.cart.update({\n\t\t\t\tcount: newCount,\n\t\t\t\tnewItem: item\n\t\t\t});\n\t\t}\n\t}\n}\n\nfunction trackEmptyCart(){\n\tvar newCount = bouncex.utk.cart.getCount();\n\tvar oldCount = bouncex.utk.cart.getCart().count || 0;\n\tif (newCount == 0 && oldCount > 0){\n\t\tbouncex.utk.cart.update({\n\t\t\tcount: 0\n\t\t});\n\t}\n}\n\nbouncex.utk.init = function() {\n\tif (location.pathname.indexOf('gift-card') == -1){\n\t\tbouncex.utk.miw({\n\t\t\tselector: 'input:not(.exp-gift-card-emailConfirm--input, .exp-gift-card-recipientEmailAddress--input, input[type=button], :input[type=submit], :input[type=reset], :input[type=hidden], :input[type=radio], :input[type=checkbox], :input[type=image], :input[type=password])',\n\t\t});\n\t}\n\tbouncex.utk.stopAll();\n\n\tvar pageType = bouncex.utk.getPageType();\n\n\t    if (pageType == 'product' || pageType == 'nike id product'){\n\t\t \n\t\t\tvar checkIdInterval = bouncex.utk.setInterval({\n\t\t\t\tcallback: function(){\n\t\t\t\t\tvar backUpId = bouncex.utils.getParam('prodID',jQuery('script[id=\"neo\"]').nextAll('script[type=\"text/javascript\"]').eq(1).attr('src')) || false;\n\t\t\t\t\tif (bouncex.state.mobile && backUpId){\n\t\t\t\t\t\tbouncex.utk.viewItem({\n\t\t\t\t\t\t\titemTracking: false,\n\t\t\t\t\t\t\tgetItemData: getMobileProductId\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbouncex.utk.stop(checkIdInterval);\n\t\t\t\t\t}else if (pageType === 'product' && (getIdFromUrl(window.location.href) || backUpId)) {\n\t\t\t\t\t\tbouncex.utk.viewItem({\n\t\t\t\t\t\t\tgetItemData: getTESTProductItemData,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbouncex.utk.stop(checkIdInterval);\n\t\t\t\t\t}else if (pageType === 'nike id product' && getFromWindow('productId')) {\n\t\t\t\t\t\tbouncex.utk.viewItem({\n\t\t\t\t\t\t\tgetItemData: getNikeIdProductData,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbouncex.utk.stop(checkIdInterval);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t    }\n\n\n\t// if (pageType == 'nike id product'){\n\t// \tbouncex.push(['view nike id item', bouncex.utk.getMetadata()])\n\t// }\n\n\tif (pageType == 'category' || pageType == 'search'){\n\t\tbouncex.utk.hoverItem({\n\t\t\tselector: '.grid-item-content',\n\t\t\titemTracking: false,\n\t\t\tgetItemData: getListpageId\n\t\t});\n\t}\n\n\t// if (pageType == 'category'){\n\t// \tbouncex.utk.trackListPage({\n\t// \t\ttitle: pageType == jQuery('meta[name=keywords]').attr('content'),\n\t// \t\tselector: '.grid-item-content',\n\t// \t\tgetItemData: getListpageId,\n\t// \t}); \n\t// }\n\t// if (pageType == 'search'){\n\t// \tbouncex.utk.trackListPage({\n\t// \t\tselector: '.grid-item-content',\n\t// \t\tgetItemData: getListpageId,\n\t// \t\turl: 'http://store.nike.com/' + location.pathname + location.search\n\t// \t}); \n\t// }\n\n\t//cart tracking\n\tbouncex.utk.cart.init();\n\n\tif (pageType == 'product' || pageType == 'nike id product'){\n\t\tbouncex.utk.setInterval({\n\t\t\tcallback: trackAddToCart\n\t\t});\n\t}\n\n\tif (pageType == 'cart'){\n\t\tbouncex.utk.setInterval({\n\t\t\tcallback: trackEmptyCart\n\t\t});\n\t}\n\n};\n\nif(window.location.hostname === 'store.nike.com' || window.location.hostname === 'www.nike.com'){\n\tbouncex.utk.init();\n}","cjs":"","miw":0,"mibcx":1,"te":1,"cart_rep":{"get":"","set":""},"ulpj":null,"cus":"","miw_exclude":""},"etjson":null,"osre":true,"osru":"osr.bounceexchange.com/v1/osr/items","checkDfp":false,"spa":0,"spatm":1,"preinit_cjs":"","cpnu":"cpn.bouncex.net"}
;
		bouncex.tag = 'tag3';
		bouncex.$ = window.jQuery;
		bouncex.env = 'production';
		bouncex.restrictedTlds = {"casl":{"ca":1},"gdpr":{"ad":1,"al":1,"at":1,"ax":1,"ba":1,"be":1,"bg":1,"by":1,"xn--90ais":1,"ch":1,"cy":1,"cz":1,"de":1,"dk":1,"ee":1,"es":1,"eu":1,"fi":1,"fo":1,"fr":1,"uk":1,"gb":1,"gg":1,"gi":1,"gr":1,"hr":1,"hu":1,"ie":1,"im":1,"is":1,"it":1,"je":1,"li":1,"lt":1,"lu":1,"lv":1,"mc":1,"md":1,"me":1,"mk":1,"xn--d1al":1,"mt":1,"nl":1,"no":1,"pl":1,"pt":1,"ro":1,"rs":1,"xn--90a3ac":1,"ru":1,"su":1,"xn--p1ai":1,"se":1,"si":1,"sj":1,"sk":1,"sm":1,"ua":1,"xn--j1amh":1,"va":1,"tr":1}};
		bouncex.push = function(pushData) {
			bouncex.pushedData.push(pushData);
		}
		var script = document.createElement('script');
		script.setAttribute('src', '//assets.bounceexchange.com/assets/smart-tag/versioned/ijs_all_modules_27b453b1ae67ae0b506ee6950a99e6ac.js');

		document.body.appendChild(script);
	}
}
if (document.readyState === "loading") {
	document.addEventListener("DOMContentLoaded", bxBootstrap);
} else {
	bxBootstrap();
}})();